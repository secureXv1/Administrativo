import{c,o as d,r as A,a,b as qe,d as ge,e as b,w as Y,f as D,v as le,T as Ce,g as B,h as S,n as he,i as U,t as f,F as M,j as P,k as j,l as Pe,_ as Fe,m as E,p as T,u as He,q as z,s as Ge,x as we,y as ze,z as K,A as X,B as Ke,C as _,D as ve,E as je,G as Ze}from"./index-CDEmzaBD.js";function me(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function Xe(e){return(...s)=>!e(...s)}function Ye(e,s){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(s.trim())!==-1}function Qe(e){return e.filter(s=>!s.$isLabel)}function fe(e,s){return n=>n.reduce((y,g)=>g[e]&&g[e].length?(y.push({$groupLabel:g[s],$isLabel:!0}),y.concat(g[e])):y,[])}const Ve=(...e)=>s=>e.reduce((n,y)=>y(n),s);var Je={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,s){return me(e)?"":s?e[s]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1},filteringSortFunc:{type:Function,default:null}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",s=e.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,s,this.label):this.filterOptions(n,s,this.label,this.customLabel):n=this.groupValues?fe(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(Xe(this.isSelected)):n,this.taggable&&s.length&&!this.isExistingOption(s)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(s=>this.customLabel(s,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,s,n){return Ve(this.filterGroups(s,n,this.groupValues,this.groupLabel,this.customLabel),fe(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return Ve(fe(this.groupValues,this.groupLabel),Qe)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const s=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(s)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(me(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const s=this.customLabel(e,this.label);return me(s)?"":s},select(e,s){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(s)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(s==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){s!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const s=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);if(s){if(this.wholeGroupSelected(s)){this.$emit("remove",s[this.groupValues],this.id);const n=this.trackBy?s[this.groupValues].map(g=>g[this.trackBy]):s[this.groupValues],y=this.internalValue.filter(g=>n.indexOf(this.trackBy?g[this.trackBy]:g)===-1);this.$emit("update:modelValue",y)}else{const n=s[this.groupValues].filter(y=>!(this.isOptionDisabled(y)||this.isSelected(y)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(s=>this.isSelected(s)||this.isOptionDisabled(s))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,s=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const y=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",y)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&s&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,s=window.innerHeight-this.$el.getBoundingClientRect().bottom;s>this.maxHeight||s>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(s-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))},filterOptions(e,s,n,y){return s?e.filter(g=>Ye(y(g,n),s)).sort((g,r)=>typeof this.filteringSortFunc=="function"?this.filteringSortFunc(g,r):y(g,n).length-y(r,n).length):e},filterGroups(e,s,n,y,g){return r=>r.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const O=this.filterOptions(o[n],e,s,g);return O.length?{[y]:o[y],[n]:O}:[]})}}},We={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,s){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(s)}},groupHighlight(e,s){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":s.$isLabel}];const n=this.options.find(y=>y[this.groupLabel]===s.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list?.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list?.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},De={name:"vue-multiselect",mixins:[Je,We],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1},useTeleport:{type:Boolean,default:!1}},data(){return{dropdownStyles:{},ready:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)},isRequired(){return this.required===!1?!1:this.internalValue.length<=0}},watch:{isOpen(e){e&&(this.useTeleport?(this.ready=!1,this.$nextTick(()=>{const s=this.$el.getBoundingClientRect();this.dropdownStyles={position:"absolute",top:`${s.bottom+window.scrollY}px`,left:`${s.left+window.scrollX}px`,width:`${s.width}px`,zIndex:9999},this.ready=!0})):this.ready=!0)}}};const et=["tabindex","aria-expanded","aria-owns","aria-activedescendant"],tt={ref:"tags",class:"multiselect__tags"},it={class:"multiselect__tags-wrap"},lt=["textContent"],st=["onKeypress","onMousedown"],at=["textContent"],nt={class:"multiselect__spinner"},ot=["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-label","aria-controls"],rt=["id","aria-multiselectable"],ut={key:0},dt={class:"multiselect__option"},pt=["aria-selected","id","role"],ct=["onClick","onMouseenter","data-select","data-selected","data-deselect"],ht=["data-select","data-deselect","onMouseenter","onMousedown"],vt={class:"multiselect__option"},mt={class:"multiselect__option"};function ft(e,s,n,y,g,r){return d(),c("div",{tabindex:e.searchable?-1:n.tabindex,class:j([{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":r.isAbove,"multiselect--has-options-group":r.hasOptionGroup},"multiselect"]),onFocus:s[14]||(s[14]=o=>e.activate()),onBlur:s[15]||(s[15]=o=>e.searchable?!1:e.deactivate()),onKeydown:[s[16]||(s[16]=B(S(o=>e.pointerForward(),["self","prevent"]),["down"])),s[17]||(s[17]=B(S(o=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:s[18]||(s[18]=B(S(o=>e.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:s[19]||(s[19]=B(o=>e.deactivate(),["esc"])),role:"combobox","aria-expanded":e.isOpen,"aria-owns":"listbox-"+e.id,"aria-activedescendant":e.isOpen&&e.pointer!==null?e.id+"-"+e.pointer:null},[A(e.$slots,"caret",{toggle:e.toggle},()=>[a("div",{onMousedown:s[0]||(s[0]=S(o=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),A(e.$slots,"clear",{search:e.search}),a("div",tt,[A(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:r.visibleValues,isOpen:e.isOpen},()=>[D(a("div",it,[(d(!0),c(M,null,P(r.visibleValues,(o,O)=>A(e.$slots,"tag",{option:o,search:e.search,remove:e.removeElement},()=>[(d(),c("span",{class:"multiselect__tag",key:O,onMousedown:s[1]||(s[1]=S(()=>{},["prevent"]))},[a("span",{textContent:f(e.getOptionLabel(o))},null,8,lt),a("i",{tabindex:"1",onKeypress:B(S(R=>e.removeElement(o),["prevent"]),["enter"]),onMousedown:S(R=>e.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,st)],32))])),256))],512),[[le,r.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?A(e.$slots,"limit",{key:0},()=>[a("strong",{class:"multiselect__strong",textContent:f(n.limitText(e.internalValue.length-n.limit))},null,8,at)]):b("v-if",!0)]),ge(Ce,{name:"multiselect__loading"},{default:Y(()=>[A(e.$slots,"loading",{},()=>[D(a("div",nt,null,512),[[le,n.loading]])])]),_:3}),e.searchable?(d(),c("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:n.spellcheck,placeholder:e.placeholder,required:r.isRequired,style:he(r.inputStyle),value:e.search,disabled:n.disabled,tabindex:n.tabindex,"aria-label":n.name+"-searchbox",onInput:s[2]||(s[2]=o=>e.updateSearch(o.target.value)),onFocus:s[3]||(s[3]=S(o=>e.activate(),["prevent"])),onBlur:s[4]||(s[4]=S(o=>e.deactivate(),["prevent"])),onKeyup:s[5]||(s[5]=B(o=>e.deactivate(),["esc"])),onKeydown:[s[6]||(s[6]=B(S(o=>e.pointerForward(),["prevent"]),["down"])),s[7]||(s[7]=B(S(o=>e.pointerBackward(),["prevent"]),["up"])),s[9]||(s[9]=B(S(o=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:s[8]||(s[8]=B(S(o=>e.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,ot)):b("v-if",!0),r.isSingleLabelVisible?(d(),c("span",{key:1,class:"multiselect__single",onMousedown:s[10]||(s[10]=S((...o)=>e.toggle&&e.toggle(...o),["prevent"]))},[A(e.$slots,"singleLabel",{option:r.singleValue},()=>[U(f(e.currentOptionLabel),1)])],32)):b("v-if",!0),r.isPlaceholderVisible?(d(),c("span",{key:2,class:"multiselect__placeholder",onMousedown:s[11]||(s[11]=S((...o)=>e.toggle&&e.toggle(...o),["prevent"]))},[A(e.$slots,"placeholder",{},()=>[U(f(e.placeholder),1)])],32)):b("v-if",!0)],512),(d(),qe(Pe,{to:"body",disabled:!n.useTeleport},[ge(Ce,{name:"multiselect"},{default:Y(()=>[e.isOpen&&g.ready?(d(),c("div",{key:0,class:"multiselect__content-wrapper",onFocus:s[12]||(s[12]=(...o)=>e.activate&&e.activate(...o)),tabindex:"-1",onMousedown:s[13]||(s[13]=S(()=>{},["prevent"])),style:he([g.dropdownStyles,{maxHeight:e.optimizedHeight+"px"}]),ref:"list"},[a("ul",{class:"multiselect__content",style:he(r.contentStyle),role:"listbox",id:"listbox-"+e.id,"aria-multiselectable":e.multiple},[A(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(d(),c("li",ut,[a("span",dt,[A(e.$slots,"maxElements",{},()=>[U("Maximum of "+f(e.max)+" options selected. First remove a selected option to select another.",1)])])])):b("v-if",!0),!e.max||e.internalValue.length<e.max?(d(!0),c(M,{key:1},P(e.filteredOptions,(o,O)=>(d(),c("li",{class:"multiselect__element",key:O,"aria-selected":e.isSelected(o),id:e.id+"-"+O,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?b("v-if",!0):(d(),c("span",{key:0,class:j([e.optionHighlight(O,o),"multiselect__option"]),onClick:S(R=>e.select(o),["stop"]),onMouseenter:S(R=>e.pointerSet(O),["self"]),"data-select":o&&o.isTag?e.tagPlaceholder:r.selectLabelText,"data-selected":r.selectedLabelText,"data-deselect":r.deselectLabelText},[A(e.$slots,"option",{option:o,search:e.search,index:O},()=>[a("span",null,f(e.getOptionLabel(o)),1)])],42,ct)),o&&(o.$isLabel||o.$isDisabled)?(d(),c("span",{key:1,"data-select":e.groupSelect&&r.selectGroupLabelText,"data-deselect":e.groupSelect&&r.deselectGroupLabelText,class:j([e.groupHighlight(O,o),"multiselect__option"]),onMouseenter:S(R=>e.groupSelect&&e.pointerSet(O),["self"]),onMousedown:S(R=>e.selectGroup(o),["prevent"])},[A(e.$slots,"option",{option:o,search:e.search,index:O},()=>[a("span",null,f(e.getOptionLabel(o)),1)])],42,ht)):b("v-if",!0)],8,pt))),128)):b("v-if",!0),D(a("li",null,[a("span",vt,[A(e.$slots,"noResult",{search:e.search},()=>[s[20]||(s[20]=U("No elements found. Consider changing the search query."))])])],512),[[le,n.showNoResults&&e.filteredOptions.length===0&&e.search&&!n.loading]]),D(a("li",null,[a("span",mt,[A(e.$slots,"noOptions",{},()=>[s[21]||(s[21]=U("List is empty."))])])],512),[[le,n.showNoOptions&&(e.options.length===0||r.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!n.loading]]),A(e.$slots,"afterList")],12,rt)],36)):b("v-if",!0)]),_:3})],8,["disabled"]))],42,et)}De.render=ft;const gt={class:"min-h-screen bg-slate-50"},yt={class:"sticky top-0 z-10 backdrop-blur bg-white/70 border-b border-slate-200"},bt={class:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between"},St={class:"text-slate-900 font-semibold text-lg sm:text-2xl"},It={class:"max-w-6xl mx-auto px-2 sm:px-4 py-6 space-y-4"},Ot={key:0,class:"text-center py-12 text-brand-700 font-semibold"},Et={key:1,class:"text-center py-12 text-red-500"},Ct={class:"card mb-3"},wt={class:"card-body grid grid-cols-1 sm:grid-cols-6 gap-3 sm:items-end"},Vt=["disabled"],Dt={key:0,value:"all"},Lt=["value"],At={class:"sm:col-span-3"},Nt=["value"],$t={key:0,class:"text-xs text-slate-500 mt-1"},kt={class:"card"},Rt={class:"card-body"},Tt={class:"grid grid-cols-1 sm:grid-cols-6 gap-2 sm:items-end"},Mt=["value"],xt={class:"flex items-center gap-2 mt-2 sm:mt-0"},Bt={class:"mt-4 flex flex-wrap gap-2"},_t={class:"card"},Ut={class:"card-body overflow-x-auto p-0"},qt={class:"table min-w-full text-xs sm:text-sm"},Pt={key:0},Ft={key:1,class:"text-center"},Ht={class:"font-medium text-slate-900"},Gt={key:0},zt={class:"text-slate-700"},Kt={key:2,class:"text-slate-300"},jt={key:1,class:"text-right"},Zt=["onClick"],Xt={key:0},Yt=["colspan"],Qt={class:"bg-white rounded-xl shadow max-w-2xl w-full"},Jt={class:"p-4 border-b flex items-center justify-between"},Wt={class:"font-semibold text-slate-800"},ei={class:"p-4 space-y-4"},ti={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},ii=["value"],li={key:0,class:"sm:col-span-2"},si={class:"flex items-center justify-between w-full"},ai={class:"text-xs text-slate-400"},ni={key:1},oi={key:2},ri={key:3},ui={key:4,class:"sm:col-span-3"},di={key:5,class:"sm:col-span-3 text-xs text-slate-500"},pi={class:"flex justify-end gap-2 pt-2"},ci=["disabled"],hi={__name:"AdminReportDetail",setup(e){const s=E([]);async function n(){try{const{data:l}=await _.get("/admin/groups",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});s.value=Array.isArray(l)?l:[]}catch{s.value=[]}}const y=T(()=>R.value&&R.value.role==="leader_group"),g=E("all"),r=He(),o=ze(),O={id:11001,name:"BOGOTÁ, D.C.",dept:"BOGOTÁ, D.C.",label(){return`${this.name} (${this.dept})`}},R=E(null);async function Le(){try{const{data:l}=await _.get("/me",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});R.value=l}catch{R.value=null}}const Q=T(()=>{const l=String(R.value?.role||"").toLowerCase();return["leader_group","superadmin","supervision","supervisor"].includes(l)}),ye=T(()=>r.params.id?String(r.params.id):null),se=T(()=>r.query.date?String(r.query.date):new Date().toISOString().slice(0,10)),L=T(()=>r.query.groupId?String(r.query.groupId):null),N=T(()=>!!L.value),ae=E(!0),x=E({groupCode:"",unitName:"",date:"—"}),$=E(!1),F=E([]),be=E([]),C=E({...{q:"",category:"ALL",state:"ALL",unitId:"ALL",onlyNovelties:!1}}),Se=["SIN NOVEDAD","SERVICIO","COMISIÓN DEL SERVICIO","FRANCO FRANCO","VACACIONES","LICENCIA DE MATERNIDAD","LICENCIA DE LUTO","LICENCIA REMUNERADA","LICENCIA NO REMUNERADA","EXCUSA DEL SERVICIO","LICENCIA PATERNIDAD","PERMISO","COMISIÓN EN EL EXTERIOR","COMISIÓN DE ESTUDIO","SUSPENDIDO","HOSPITALIZADO"],w=E(se.value),V=E(String(r.query.unitId||"")),q=E([]);function ne(){const l=new Date,t=String(l.getMonth()+1).padStart(2,"0"),i=String(l.getDate()).padStart(2,"0");return`${l.getFullYear()}-${t}-${i}`}async function J(l){try{const t={date_from:l,date_to:l};N.value&&L.value&&(t.groupId=L.value);const{data:i}=await _.get("/dashboard/reports",{params:t,headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),h=Array.isArray(i?.items)?i.items:[],m=new Map;for(const p of h)if(p.unitId&&p.unitName){const k=String(p.unitId);m.has(k)||m.set(k,{id:k,name:p.unitName})}q.value=Array.from(m.values()).sort((p,k)=>String(p.name||"").localeCompare(String(k.name||"")));const v=String(r.query.unitId||"");if(v){if(V.value=v,!q.value.some(p=>String(p.id)===v))try{const{data:p}=await _.get(`/admin/units/${v}`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});p?.id?q.value.unshift({id:String(p.id),name:p.name||`Unidad ${p.id}`}):q.value.unshift({id:v,name:`Unidad ${v}`})}catch{q.value.unshift({id:v,name:`Unidad ${v}`})}}else V.value=""}catch(t){console.error("loadUnitsIndex error",t),q.value=[]}}async function Z(l,t){try{const i=String(t??"").trim(),h=/^\d+$/.test(i)?Number(i):i,m={date_from:l,date_to:l,unitId:h};N.value&&L.value&&(m.groupId=L.value);const{data:v}=await _.get("/dashboard/reports",{params:m,headers:{Authorization:"Bearer "+localStorage.getItem("token")}});let p=Array.isArray(v?.items)?v.items:[];if(p.length&&(p=p.filter(I=>String(I.unitId)===String(h))),!p.length){await o.replace({name:r.name,params:r.params,query:{...r.query,unitId:String(h||""),date:l}});return}const k=p.sort((I,Ue)=>String(I.id).localeCompare(String(Ue.id))).pop();await o.replace({name:r.name,params:{id:String(k.id)},query:{...r.query,unitId:String(h),date:l}}),$.value=!1,F.value=[],await re(String(k.id)),x.value={...x.value,date:l},$.value=!0}catch(i){console.warn("gotoReportForUnit error:",i?.message||i),await o.replace({name:r.name,params:r.params,query:{...r.query,unitId:String(t||""),date:l}})}}async function Ae(){const l=w.value||ne();await J(l),V.value?await Z(l,V.value):(N.value&&L.value&&await G(l,L.value),await o.replace({name:r.name,params:r.params,query:{...r.query,date:l,unitId:""}}),x.value={...x.value,date:l})}async function Ie(){const l=w.value||ne(),t=V.value;if(!t){N.value&&L.value&&await G(l,L.value),await o.replace({name:r.name,params:r.params,query:{...r.query,date:l,unitId:""}});return}await Z(l,t)}z(()=>r.query,async l=>{const t=String(l.date||ne()),i=String(l.unitId||"");(t!==w.value||i!==V.value)&&(w.value=t,V.value=i,await J(t),i?await Z(t,i):N.value&&L.value&&await G(t,L.value))});function oe(l){if(!l)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(l)){const[v,p,k]=l.split("-");return`${k}/${p}/${v}`}const t=new Date(l);if(isNaN(t))return"";const i=String(t.getDate()).padStart(2,"0"),h=String(t.getMonth()+1).padStart(2,"0"),m=t.getFullYear();return`${i}/${h}/${m}`}function Ne(l){return String(l||"").toUpperCase()==="SO"?"ME":l}const $e={OF:1,SO:2,PT:3};function Oe(l){const t=String(l||"").toUpperCase();return $e[t]||99}function ke(l){const t=String(l||"").toUpperCase();return t==="SIN NOVEDAD"?"bg-green-50 text-green-700 border-green-200":t==="SERVICIO"||t==="COMISIÓN DEL SERVICIO"?"bg-sky-50 text-sky-700 border-sky-200":"bg-amber-50 text-amber-800 border-amber-200"}async function re(l){const{data:t}=await _.get(`/admin/report-agents/${l}`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),i=p=>({...p,_key:`${p.code}-${p.unitName||""}-${p.state}-${p.novelty_start||""}-${p.novelty_end||""}`,municipality:p.municipalityName&&p.dept?`${p.municipalityName} (${p.dept})`:p.municipalityName||"",municipalityName:p.municipalityName||null,municipalityDept:p.dept||null,municipalityId:p.municipalityId??null,novelty_description:p.novelty_description||p.descripcion,reportId:l}),h=(Array.isArray(t)?t:[]).map(i);F.value=h;const m=h[0],v=w.value||se.value;x.value={groupCode:m?.groupCode||"",unitName:m?.unitName||"",date:v},$.value=!0}async function G(l,t){const{data:i}=await _.get("/dashboard/reports",{params:{date_from:l,date_to:l,groupId:t},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),h=Array.isArray(i?.items)?i.items:[];if(!h.length){$.value=!1;return}x.value={groupCode:h[0].groupCode,unitName:"",date:l},be.value=[...new Map(h.map(v=>[String(v.unitName||""),{id:v.unitId,name:v.unitName}])).values()].filter(v=>!!v.id).sort((v,p)=>(v.name||"").localeCompare(p.name||""));const m=[];for(const v of h){const{data:p}=await _.get(`/admin/report-agents/${v.id}`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),k=(Array.isArray(p)?p:[]).map(I=>({...I,_key:`${I.code}-${I.unitName||""}-${I.state}-${I.novelty_start||""}-${I.novelty_end||""}`,municipality:I.municipalityName&&I.dept?`${I.municipalityName} (${I.dept})`:I.municipalityName||"",municipalityName:I.municipalityName||null,municipalityDept:I.dept||null,municipalityId:I.municipalityId??null,novelty_description:I.novelty_description||I.descripcion,reportId:v.id}));m.push(...k)}F.value=m,$.value=!0}const W=T(()=>{let l=F.value.slice();const t=C.value.q.trim().toUpperCase();if(t&&(l=l.filter(i=>String(i.code||"").toUpperCase().includes(t)||String(i.novelty_description||"").toUpperCase().includes(t)||String(i.unitName||"").toUpperCase().includes(t))),C.value.category!=="ALL"&&(l=l.filter(i=>String(i.category)===C.value.category)),C.value.state!=="ALL"&&(l=l.filter(i=>String(i.state).toUpperCase()===C.value.state)),C.value.onlyNovelties&&(l=l.filter(i=>String(i.state).toUpperCase()!=="SIN NOVEDAD")),N.value&&C.value.unitId!=="ALL"){const i=be.value.find(h=>String(h.id)===String(C.value.unitId))?.name||"";l=l.filter(h=>String(h.unitName||"")===i)}return l.sort((i,h)=>{const m=Oe(i.category),v=Oe(h.category);return m!==v?m-v:String(i.code).localeCompare(String(h.code))})}),Re=T(()=>{const l={"SIN NOVEDAD":0,SERVICIO:0,"COMISIÓN DEL SERVICIO":0,otros:0};for(const t of W.value){const i=String(t.state).toUpperCase();i==="SIN NOVEDAD"?l["SIN NOVEDAD"]++:i==="SERVICIO"?l.SERVICIO++:i==="COMISIÓN DEL SERVICIO"?l["COMISIÓN DEL SERVICIO"]++:l.otros++}return[{key:"sn",label:"Sin novedad",count:l["SIN NOVEDAD"],cls:"bg-green-50 text-green-700 border-green-200",dot:"bg-green-600"},{key:"srv",label:"Servicio",count:l.SERVICIO,cls:"bg-sky-50 text-sky-700 border-sky-200",dot:"bg-sky-600"},{key:"cds",label:"Comisión del servicio",count:l["COMISIÓN DEL SERVICIO"],cls:"bg-sky-50 text-sky-700 border-sky-200",dot:"bg-sky-600"},{key:"oth",label:"Otros",count:l.otros,cls:"bg-amber-50 text-amber-800 border-amber-200",dot:"bg-amber-600"}]}),ue=E(!1),H=E(null),ee=E(!1),u=E({state:"SIN NOVEDAD",municipio:null,novelty_start:"",novelty_end:"",novelty_description:""}),de=T(()=>["SERVICIO","VACACIONES","LICENCIA DE MATERNIDAD","LICENCIA DE LUTO","LICENCIA REMUNERADA","LICENCIA NO REMUNERADA","EXCUSA DEL SERVICIO","LICENCIA PATERNIDAD","PERMISO","COMISIÓN EN EL EXTERIOR","COMISIÓN DE ESTUDIO","SUSPENDIDO"].includes(u.value.state)),Ee=T(()=>["SERVICIO","VACACIONES","LICENCIA DE MATERNIDAD","LICENCIA DE LUTO","LICENCIA REMUNERADA","LICENCIA NO REMUNERADA","EXCUSA DEL SERVICIO","LICENCIA PATERNIDAD","PERMISO","COMISIÓN EN EL EXTERIOR","COMISIÓN DE ESTUDIO","COMISIÓN DEL SERVICIO","SUSPENDIDO","HOSPITALIZADO"].includes(u.value.state)),Te=T(()=>u.value.state==="COMISIÓN DEL SERVICIO");function Me(l){Q.value&&(H.value=l,u.value={state:l.state,municipio:l.municipalityId?{id:l.municipalityId,label:l.municipalityName?`${l.municipalityName} (${l.municipalityDept||""})`:`id ${l.municipalityId}`}:null,novelty_start:l.novelty_start||"",novelty_end:l.novelty_end||"",novelty_description:l.novelty_description||""},ue.value=!0)}function te(){ue.value=!1,H.value=null}const ie=E([]),pe=E(!1);let ce=null;async function xe(l){ce&&clearTimeout(ce),ce=setTimeout(async()=>{const t=String(l||"").trim();if(t.length<2){ie.value=[];return}pe.value=!0;try{const{data:i}=await _.get("/catalogs/municipalities",{params:{q:t,limit:15},headers:{Authorization:"Bearer "+localStorage.getItem("token")}});ie.value=(i||[]).map(h=>({id:h.id,label:`${h.name} (${h.dept})`}))}catch{ie.value=[]}finally{pe.value=!1}},250)}async function Be(){if(H.value){if(u.value.state==="COMISIÓN DEL SERVICIO"&&!u.value.municipio?.id){alert("Selecciona un municipio para Comisión del servicio");return}if(u.value.state==="COMISIÓN DEL SERVICIO"&&!u.value.novelty_description?.trim()){alert("La descripción es requerida para Comisión del servicio");return}if(u.value.state==="HOSPITALIZADO"){if(!u.value.novelty_start){alert("Falta fecha de inicio (HOSPITALIZADO)");return}if(!u.value.novelty_description?.trim()){alert("Falta descripción (HOSPITALIZADO)");return}}if(de.value&&(!u.value.novelty_start||!u.value.novelty_end)){alert("Completa las fechas de la novedad (inicio y fin)");return}if(Ee.value&&!u.value.novelty_description?.trim()){alert("La descripción es requerida para este estado");return}ee.value=!0;try{const l=u.value.state==="HOSPITALIZADO";await _.put(`/admin/report-agents/${H.value.reportId}/${H.value.agentId}`,{state:u.value.state,municipalityId:u.value.state==="COMISIÓN DEL SERVICIO"?u.value.municipio?.id||null:["SERVICIO","SIN NOVEDAD"].includes(u.value.state)?O.id:null,novelty_start:u.value.novelty_start||null,novelty_end:l?null:u.value.novelty_end||null,novelty_description:u.value.novelty_description||null},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});let t=null,i=null,h=null,m="";if(u.value.state==="COMISIÓN DEL SERVICIO"){if(t=u.value.municipio?.id||null,u.value.municipio?.label){const v=u.value.municipio.label.split(" (");i=v[0]||null,h=v[1]?v[1].replace(/\)$/,""):null,m=u.value.municipio.label}}else["SERVICIO","SIN NOVEDAD"].includes(u.value.state)&&(t=O.id,i=O.name,h=O.dept,m=O.label());Object.assign(H.value,{state:u.value.state,municipalityId:t,municipalityName:i,municipalityDept:h,municipality:m||(i?`${i} (${h||""})`:"N/A"),novelty_start:u.value.novelty_start||null,novelty_end:l?null:u.value.novelty_end||null,novelty_description:u.value.novelty_description||null}),te()}catch(l){alert(l?.response?.data?.detail||l?.response?.data?.error||"No se pudo guardar")}finally{ee.value=!1}}}async function _e(){const l=W.value.map(m=>({codigo:m.code,categoria:m.category,unidad:m.unitName||"",estado:m.state,ubicacion:m.municipality||"",descripcion:m.novelty_description||"",fecha_inicio:m.novelty_start?String(m.novelty_start).slice(0,10):"",fecha_fin:m.novelty_end?String(m.novelty_end).slice(0,10):""})),t=ve.json_to_sheet(l),i=ve.book_new();ve.book_append_sheet(i,t,"Detalle");const h=je(i,{bookType:"xlsx",type:"array"});Ze.saveAs(new Blob([h],{type:"application/octet-stream"}),`detalle_${x.value.groupCode}_${x.value.date}.xlsx`)}return Ge(async()=>{ae.value=!0,await Le(),await n();const l=r.query.groupId?String(r.query.groupId):y.value&&s.value[0]?String(s.value[0].id):"all";g.value=l;try{const t=String(r.query.date||""),i=String(r.query.unitId||"");w.value=t||se.value,V.value=i,await J(w.value),V.value&&w.value?await Z(w.value,V.value):N.value&&L.value?await G(w.value,L.value):ye.value?(await re(ye.value),x.value={...x.value,date:w.value}):$.value=!1,y.value&&s.value.length&&(g.value=String(s.value[0].id))}catch{$.value=!1}finally{ae.value=!1}}),z(()=>r.params.id,async(l,t)=>{if(l&&l!==t){$.value=!1,F.value=[];try{await re(String(l))}finally{$.value=!0}}}),z(V,async(l,t)=>{l!==t&&await Ie()}),z(()=>r.query.unitId,async(l,t)=>{if(l!==t){const i=String(r.query.date||w.value);V.value=String(l||""),V.value?await Z(i,V.value):N.value&&L.value&&($.value=!1,F.value=[],await G(i,L.value),$.value=!0)}}),z(g,async(l,t)=>{l!==t&&(await o.replace({name:r.name,params:r.params,query:{...r.query,groupId:l==="all"?void 0:l,unitId:""}}),await J(w.value),l!=="all"?await G(w.value,l):(F.value=[],$.value=!1))}),z(()=>r.query.groupId,l=>{l&&String(g.value)!==String(l)&&(g.value=String(l)),!l&&g.value!=="all"&&(g.value="all")}),(l,t)=>(d(),c("div",gt,[a("header",yt,[a("div",bt,[a("h1",St,f(N.value?"Detalle de reporte del grupo":"Detalle de reporte de unidad"),1),a("button",{onClick:t[0]||(t[0]=i=>we(o).back()),class:"btn-ghost"},"Volver")])]),a("main",It,[ae.value?(d(),c("div",Ot,"Cargando...")):$.value?(d(),c(M,{key:2},[a("div",Ct,[a("div",wt,[a("div",null,[t[14]||(t[14]=a("label",{class:"label"},"Fecha",-1)),D(a("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=i=>w.value=i),class:"input",onChange:Ae},null,544),[[K,w.value]])]),a("div",null,[t[15]||(t[15]=a("label",{class:"label"},"Grupo",-1)),D(a("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>g.value=i),class:"input",disabled:y.value},[y.value?b("",!0):(d(),c("option",Dt,"Todos")),(d(!0),c(M,null,P(s.value,i=>(d(),c("option",{key:i.id,value:String(i.id)},f(i.code)+" ("+f(i.name)+") ",9,Lt))),128))],8,Vt),[[X,g.value]])]),a("div",At,[t[17]||(t[17]=a("label",{class:"label"},"Unidad",-1)),D(a("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>V.value=i),class:"input",onChange:Ie},[t[16]||(t[16]=a("option",{value:""},"Todas las unidades…",-1)),(d(!0),c(M,null,P(q.value,i=>(d(),c("option",{key:i.id,value:String(i.id)},f(i.name),9,Nt))),128))],544),[[X,V.value]]),q.value.length?b("",!0):(d(),c("p",$t," No hay unidades para la fecha seleccionada. "))])])]),a("div",kt,[a("div",Rt,[a("div",Tt,[a("div",null,[t[18]||(t[18]=a("label",{class:"label"},"Búsqueda",-1)),D(a("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>C.value.q=i),class:"input",placeholder:"Código o texto…"},null,512),[[K,C.value.q]])]),a("div",null,[t[20]||(t[20]=a("label",{class:"label"},"Categoría",-1)),D(a("select",{"onUpdate:modelValue":t[5]||(t[5]=i=>C.value.category=i),class:"input"},t[19]||(t[19]=[a("option",{value:"ALL"},"Todas",-1),a("option",{value:"OF"},"OF",-1),a("option",{value:"SO"},"ME",-1),a("option",{value:"PT"},"PT",-1)]),512),[[X,C.value.category]])]),a("div",null,[t[22]||(t[22]=a("label",{class:"label"},"Estado",-1)),D(a("select",{"onUpdate:modelValue":t[6]||(t[6]=i=>C.value.state=i),class:"input"},[t[21]||(t[21]=a("option",{value:"ALL"},"Todos",-1)),(d(),c(M,null,P(Se,i=>a("option",{key:i,value:i},f(i),9,Mt)),64))],512),[[X,C.value.state]])]),a("div",xt,[D(a("input",{id:"solo-nov",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=i=>C.value.onlyNovelties=i),class:"h-4 w-4"},null,512),[[Ke,C.value.onlyNovelties]]),t[23]||(t[23]=a("label",{class:"label cursor-pointer",for:"solo-nov"},"Solo novedades",-1))]),a("div",{class:"flex gap-2"},[a("button",{class:"flex-1 sm:flex-none inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700",onClick:_e},"Descargar")])]),a("div",Bt,[(d(!0),c(M,null,P(Re.value,i=>(d(),c("span",{key:i.key,class:j(["inline-flex items-center gap-2 px-3 py-1 rounded-full border text-sm",i.cls])},[a("span",{class:j(["inline-block w-2.5 h-2.5 rounded-full",i.dot])},null,2),U(" "+f(i.label)+": ",1),a("b",null,f(i.count),1)],2))),128))])])]),a("div",_t,[a("div",Ut,[a("table",qt,[a("thead",null,[a("tr",null,[t[24]||(t[24]=a("th",null,"Código",-1)),t[25]||(t[25]=a("th",null,"Agente",-1)),t[26]||(t[26]=a("th",null,"Categoría",-1)),N.value?(d(),c("th",Pt,"Unidad")):b("",!0),t[27]||(t[27]=a("th",null,"Estado",-1)),t[28]||(t[28]=a("th",null,"Ubicación",-1)),t[29]||(t[29]=a("th",null,"Descripción",-1)),t[30]||(t[30]=a("th",null,"Novedad (inicio - fin)",-1)),Q.value?(d(),c("th",Ft,"Acciones")):b("",!0)])]),a("tbody",null,[(d(!0),c(M,null,P(W.value,i=>(d(),c("tr",{key:i._key},[a("td",Ht,f(i.code),1),a("td",null,f(i.nickname||"—"),1),a("td",null,f(Ne(i.category)),1),N.value?(d(),c("td",Gt,[a("span",zt,f(i.unitName||"—"),1)])):b("",!0),a("td",null,[a("span",{class:j(["inline-flex px-2 py-0.5 rounded-full text-xs font-semibold border",ke(i.state)])},f(i.state),3)]),a("td",null,f(i.municipality||"N/A"),1),a("td",null,f(i.novelty_description||"—"),1),a("td",null,[i.novelty_start&&i.novelty_end?(d(),c(M,{key:0},[U(f(oe(i.novelty_start))+" – "+f(oe(i.novelty_end)),1)],64)):i.novelty_start?(d(),c(M,{key:1},[U(f(oe(i.novelty_start)),1)],64)):(d(),c("span",Kt,"—"))]),Q.value?(d(),c("td",jt,[a("button",{class:"btn-ghost p-1",title:"Editar",onClick:h=>Me(i)},t[31]||(t[31]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M18 2a2.828 2.828 0 0 1 4 4L7 21l-4 1 1-4Z"}),a("path",{d:"m16 5 3 3"})],-1)]),8,Zt)])):b("",!0)]))),128)),W.value.length?b("",!0):(d(),c("tr",Xt,[a("td",{colspan:Q.value?N.value?8:7:N.value?7:6,class:"text-center text-slate-500 py-6"},"Sin agentes",8,Yt)]))])])])]),ue.value?(d(),c("div",{key:0,class:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4",onClick:S(te,["self"])},[a("div",Qt,[a("div",Jt,[a("div",Wt," Editar agente — "+f(H.value?.code),1),a("button",{class:"btn-ghost",onClick:te},"Cerrar")]),a("div",ei,[a("div",ti,[a("div",null,[t[32]||(t[32]=a("label",{class:"label"},"Estado",-1)),D(a("select",{"onUpdate:modelValue":t[8]||(t[8]=i=>u.value.state=i),class:"input"},[(d(),c(M,null,P(Se,i=>a("option",{key:i,value:i},f(i),9,ii)),64))],512),[[X,u.value.state]])]),Te.value?(d(),c("div",li,[t[34]||(t[34]=a("label",{class:"label"},"Municipio",-1)),ge(we(De),{modelValue:u.value.municipio,"onUpdate:modelValue":t[9]||(t[9]=i=>u.value.municipio=i),options:ie.value,loading:pe.value,"internal-search":!1,"clear-on-select":!0,"close-on-select":!0,"preserve-search":!0,"show-labels":!1,placeholder:"Escribe para buscar…",label:"label","track-by":"id",onSearchChange:xe,class:"w-full"},{noResult:Y(()=>t[33]||(t[33]=[U("Ningún municipio encontrado",-1)])),option:Y(({option:i})=>[a("div",si,[a("span",null,f(i.label),1),a("span",ai,"id: "+f(i.id),1)])]),singleLabel:Y(({option:i})=>[a("span",null,f(i.label),1)]),_:1},8,["modelValue","options","loading"]),t[35]||(t[35]=a("div",{class:"text-xs text-slate-500 mt-1"}," Para “Comisión del servicio” el municipio es obligatorio (sin fechas). ",-1))])):b("",!0),de.value?(d(),c("div",ni,[t[36]||(t[36]=a("label",{class:"label"},"Inicio",-1)),D(a("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>u.value.novelty_start=i),type:"date",class:"input"},null,512),[[K,u.value.novelty_start]])])):b("",!0),de.value?(d(),c("div",oi,[t[37]||(t[37]=a("label",{class:"label"},"Fin",-1)),D(a("input",{"onUpdate:modelValue":t[11]||(t[11]=i=>u.value.novelty_end=i),type:"date",class:"input"},null,512),[[K,u.value.novelty_end]])])):u.value.state==="HOSPITALIZADO"?(d(),c("div",ri,[t[38]||(t[38]=a("label",{class:"label"},"Inicio",-1)),D(a("input",{"onUpdate:modelValue":t[12]||(t[12]=i=>u.value.novelty_start=i),type:"date",class:"input"},null,512),[[K,u.value.novelty_start]])])):b("",!0),Ee.value?(d(),c("div",ui,[t[39]||(t[39]=a("label",{class:"label"},"Descripción",-1)),D(a("textarea",{"onUpdate:modelValue":t[13]||(t[13]=i=>u.value.novelty_description=i),class:"input",rows:"2",placeholder:"Motivo / detalle..."},null,512),[[K,u.value.novelty_description]])])):b("",!0),u.value.state==="SERVICIO"?(d(),c("div",di," Para “SERVICIO” el municipio se fija automáticamente en Bogotá (11001). ")):b("",!0)]),a("div",pi,[a("button",{class:"btn-ghost",onClick:te},"Cancelar"),a("button",{class:"btn-primary",onClick:Be,disabled:ee.value},f(ee.value?"Guardando...":"Guardar"),9,ci)])])])])):b("",!0)],64)):(d(),c("div",Et,"No se encontró información para los parámetros."))])]))}},fi=Fe(hi,[["__scopeId","data-v-75c03faa"]]);export{fi as default};
